<h1 id='marketplace'>Marketplace</h1>
<p>The marketplace manages listings from creation to sale as well as disputes between users.</p>
<h2 id='marketplace-getlistings'>getListings</h2>
<p>This will return information about the listing, combining information from IPFS and the blockchain. In the future, fields returned may differ based on the listing&#39;s schema.</p>

<p>A listing is a published action from a seller to sell something.
It is active until there are no more units available or its expiration date is reached.</p>

<blockquote>
<p>Example: getListings</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">getListings</span><span class="p">({</span> <span class="na">idsOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>

<span class="c1">//returns</span>

<span class="p">[</span><span class="s1">'0-34-2-34'</span><span class="p">,</span> <span class="s1">'000-234'</span><span class="p">]</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">getListings</span><span class="p">({</span> <span class="na">listingsFor</span><span class="p">:</span> <span class="s1">'0x627306090abab3a6e1400e9345bc60c78a8bef57'</span> <span class="p">})</span>

<span class="c1">//returns all listings for '0x627306090abab3a6e1400e9345bc60c78a8bef57'</span>

<span class="p">[{</span>
  <span class="na">id</span><span class="p">:</span> <span class="s2">"99-0023"</span><span class="p">,</span>
  <span class="na">title</span><span class="p">:</span> <span class="s2">"Kettlebell For Sale"</span><span class="p">,</span>
  <span class="na">media</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">schemaId</span><span class="p">:</span> <span class="s2">"09398482-2834"</span><span class="p">,</span>
  <span class="na">unitsTotal</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s2">"unit"</span><span class="p">,</span>
  <span class="na">category</span><span class="p">:</span> <span class="s2">"healthAndBeauty"</span><span class="p">,</span>
  <span class="na">subCategory</span><span class="p">:</span> <span class="s2">"dailyExercise"</span><span class="p">,</span>
  <span class="na">language</span><span class="p">:</span> <span class="s2">"English"</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="s2">"32kg gorilla kettlebell"</span><span class="p">,</span>
  <span class="na">price</span><span class="p">:</span> <span class="p">{</span> <span class="na">currency</span><span class="p">:</span> <span class="s1">'ETH'</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="s1">'0.5'</span> <span class="p">},</span>
  <span class="na">commission</span><span class="p">:</span> <span class="p">{</span> <span class="na">currency</span><span class="p">:</span> <span class="s1">'OGN'</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="s1">'1'</span> <span class="p">},</span>
  <span class="na">ipfsHash</span><span class="p">:</span> <span class="s2">"QmWZDcDq4aYGx9XmkPcx4mnKaGW2jCxf5tknrCtbfpJJFf"</span><span class="p">,</span>
  <span class="na">seller</span><span class="p">:</span> <span class="s2">"0x627306090abab3a6e1400e9345bc60c78a8bef57"</span><span class="p">,</span>
  <span class="na">depositManager</span><span class="p">:</span> <span class="s1">'0x02394099fu9dfse0920394u329u4024'</span><span class="p">,</span>
  <span class="na">status</span><span class="p">:</span> <span class="s1">'active'</span><span class="p">,</span>
  <span class="na">offers</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">//is this supposed to be an array or an object?</span>
  <span class="na">events</span><span class="p">:[{</span> <span class="na">id</span><span class="p">:</span> <span class="s1">'20949-345'</span><span class="p">,</span> <span class="na">event</span><span class="p">:</span> <span class="s1">'ListingCreated'</span> <span class="p">}]</span>
<span class="p">}]</span>
</code></pre><h3 id='marketplace-getlistings-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>idsOnly</strong></td>
<td>boolean</td>
<td>optional</td>
<td></td>
</tr>
<tr>
<td><strong>listingsFor</strong></td>
<td>string</td>
<td>optional</td>
<td>user&#39;s address</td>
</tr>
<tr>
<td><strong>purchasesFor</strong></td>
<td>string</td>
<td>optional</td>
<td>user&#39;s address</td>
</tr>
</tbody></table>
<h2 id='marketplace-createlisting'>createListing</h2>
<p>When you create a listing, the API will create both the IPFS data and the Listing contract on the blockchain.
When a listing is successfully created, the <code>createListing</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: createListing</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">listing</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">category</span><span class="p">:</span> <span class="s2">"schema.forSale"</span><span class="p">,</span>
  <span class="na">commission</span><span class="p">:</span> <span class="p">{</span> <span class="na">amount</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span> <span class="na">currency</span><span class="p">:</span> <span class="s2">"OGN"</span> <span class="p">},</span>
  <span class="na">description</span><span class="p">:</span> <span class="s2">"ojwoifj weofijfoijfewoi qfoiqejqoidjq oidwjqdo"</span><span class="p">,</span>
  <span class="na">language</span><span class="p">:</span> <span class="s2">"en-US"</span><span class="p">,</span>
  <span class="na">listingType</span><span class="p">:</span> <span class="s2">"unit"</span><span class="p">,</span>
  <span class="na">media</span><span class="p">:</span> <span class="p">[{</span><span class="err">â€¦</span><span class="p">}],</span>
  <span class="na">price</span><span class="p">:</span> <span class="p">{</span> <span class="na">amount</span><span class="p">:</span> <span class="s2">"0.01"</span><span class="p">,</span> <span class="na">currency</span><span class="p">:</span> <span class="s2">"ETH"</span> <span class="p">},</span>
  <span class="na">schemaId</span><span class="p">:</span> <span class="s2">"https://schema.originprotocol.com/listing_1.0.0.json"</span><span class="p">,</span>
  <span class="na">subCategory</span><span class="p">:</span> <span class="s2">"schema.appliances"</span><span class="p">,</span>
  <span class="na">title</span><span class="p">:</span> <span class="s2">"I am a great appliance listing"</span><span class="p">,</span>
  <span class="na">unitsTotal</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">createListing</span><span class="p">({</span> <span class="nx">listing</span> <span class="p">},</span> <span class="nx">callback</span><span class="p">)</span>
</code></pre><h3 id='marketplace-createlisting-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>listing</strong></td>
<td>object</td>
<td>required</td>
<td></td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-withdrawlisting'>withdrawListing</h2>
<p>Withdrawing a transaction will set the <code>unitsAvailable</code> to zero. This will stop any further offers for that Listing.
When a listing is successfully withdrawn, the <code>withdrawListing</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: withdrawListing</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">listingId</span> <span class="o">=</span> <span class="s2">"927-832"</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">withdrawListing</span><span class="p">(</span><span class="nx">listingId</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
</code></pre><h3 id='marketplace-withdrawlisting-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>listingId</strong></td>
<td>string</td>
<td>required</td>
<td>id of the listing to be withdrawn</td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>object</td>
<td>optional</td>
<td>default to <code>{}</code> if not needed</td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-getlistingreviews'>getListingReviews</h2>
<p>Reviews are created by the buyer in the receipt stage and by the seller in the payout stage of the offer process. A review consists of a required 1-5 rating and an optional reviewText text field.</p>

<blockquote>
<p>Example: withdrawListing</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">listingId</span> <span class="o">=</span> <span class="s2">"927-832"</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">getListingReviews</span><span class="p">(</span><span class="nx">listingId</span><span class="p">)</span>

<span class="c1">//returns</span>

<span class="p">[{</span>
  <span class="s2">"schemaId"</span><span class="p">:</span> <span class="s2">"https://schema.originprotocol.com/review_1.0.0.json"</span><span class="p">,</span>
  <span class="s2">"rating"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Solid Listing"</span>
  <span class="s2">"reviewer"</span><span class="p">:</span> <span class="s2">"0x29884972398479234792"</span>
<span class="p">]}</span>
</code></pre><h3 id='marketplace-getlistingreviews-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>listingId</strong></td>
<td>string</td>
<td>required</td>
<td>id of the listing</td>
</tr>
</tbody></table>
<h2 id='marketplace-getnotifications'>getNotifications</h2>
<p>Each Notification corresponds to the status of an Offer. Notifications are currently generated for each of the following Offer statuses:</p>

<ul>
<li>OfferCreated</li>
<li>OfferAccepted</li>
<li>OfferFinalized</li>
<li>OfferWithdrawn</li>
<li>OfferDisputed</li>
<li>OfferRuling</li>
<li>OfferFinalized</li>
<li>OfferData</li>
</ul>

<p>Notifications do not exist on the blockchain nor are they read from a database. They are derived from the blockchain transaction logs of the Offer statuses at the time of the API request. Because of this, there is no central record of a notification&#39;s status as &quot;read&quot; or &quot;unread&quot;. When a client first interacts with the notifications API, Origin.js will record a timestamp in local storage. All notifications resulting from blockchain events that happen prior to this timestamp will be considered to be &quot;read&quot;. This ensures that when the same user interacts with the notifications API from a different client for the first time, they will not receive a large number of &quot;unread&quot; notifications that they have previously read from their original client.</p>

<blockquote>
<p>Example: getNotifications</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">getNotifications</span><span class="p">()</span>

<span class="c1">//returns all notifications for the user</span>

<span class="p">[{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"2984803-23433"</span><span class="p">,</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"buyer_offer_accepted"</span><span class="p">,</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"unread"</span><span class="p">,</span>
  <span class="s2">"event"</span><span class="p">:</span> <span class="p">{...},</span>
  <span class="s2">"resources"</span><span class="p">:</span> <span class="p">{</span> <span class="na">listingId</span><span class="p">:</span> <span class="s2">"1-000-832"</span><span class="p">,</span> <span class="na">offerId</span><span class="p">:</span> <span class="s2">"183"</span><span class="p">,</span> <span class="na">listing</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="s2">"Whirlpool Microwave"</span> <span class="p">},</span> <span class="na">offer</span><span class="p">:</span> <span class="p">{...}</span> <span class="p">}</span>
<span class="p">]}</span>
</code></pre><h2 id='marketplace-setnotification'>setNotification</h2>
<p>Since notification objects do not live on the blockchain or in a database, this method only records an update to the client&#39;s local storage. It accepts a single parameter, which should be an object containing the id of the notification and a status value of either read or unread. Any other properties included in this object will be ignored.</p>

<blockquote>
<p>Example: setNotification</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="s2">"2984803-23433"</span>
<span class="kr">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="s2">"read"</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">setNotification</span><span class="p">({</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">status</span> <span class="p">})</span>

</code></pre><h3 id='marketplace-setnotification-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td>required</td>
<td>id of the notification</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>string</td>
<td>required</td>
<td><code>&quot;read&quot;</code> or <code>&quot;unread&quot;</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-getoffer'>getOffer</h2>
<p>This will return a specific offer sent by a buyer for a listing offer.</p>

<p>An Offer is a single transaction between a buyer and seller. A single Listing with multiple items for sale could have many Offers related to it, one for each buyer.</p>

<p>A new Offer contract is created when a buyer purchases a Listing.</p>

<blockquote>
<p>Example: getOffer</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">offerId</span> <span class="o">=</span> <span class="s2">"2403-234"</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">getOffer</span><span class="p">(</span><span class="nx">offerId</span><span class="p">)</span>

<span class="c1">//returns the specified offer</span>

<span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="s2">"2403-234"</span><span class="p">,</span>
  <span class="nx">listingId</span><span class="p">:</span> <span class="s2">"999-000-0"</span><span class="p">,</span>
  <span class="nx">status</span><span class="p">:</span> <span class="s2">"accepted"</span><span class="p">,</span>
  <span class="nx">createdAt</span><span class="p">:</span> <span class="mi">1539991086</span><span class="p">,</span>
  <span class="nx">buyer</span><span class="p">:</span> <span class="s2">"0x627306090274fwfiou97h0c78a8BEf57"</span><span class="p">,</span>
  <span class="nx">events</span><span class="p">:</span> <span class="p">[...],</span>
  <span class="nx">refund</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="nx">schemaId</span><span class="p">:</span> <span class="s2">"https://schema.originprotocol.com/offer_1.0.0.json"</span><span class="p">,</span>
  <span class="nx">listingType</span><span class="p">:</span> <span class="s2">"unit"</span><span class="p">,</span>
  <span class="nx">unitsPurchased</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">totalPrice</span><span class="p">:</span> <span class="p">{</span> <span class="nl">currency</span><span class="p">:</span> <span class="s2">"ETH"</span><span class="p">,</span> <span class="nx">amount</span><span class="p">:</span> <span class="s2">"0.033"</span> <span class="p">},</span>
  <span class="nx">ipfs</span><span class="p">:</span> <span class="p">{...}</span>
<span class="p">}</span>
</code></pre><h3 id='marketplace-getoffer-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offerId</strong></td>
<td>string</td>
<td>required</td>
<td><code>offer.id</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-getoffers'>getOffers</h2>
<p>This will return all offers related to a specific listing.</p>

<blockquote>
<p>Example: getOffers</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">listingId</span> <span class="o">=</span> <span class="s2">"9903-75"</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">for</span><span class="p">:</span> <span class="s2">"0x627306090274fwfiou97h0c78a8BEf57"</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">getOffers</span><span class="p">(</span><span class="nx">listingId</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>

<span class="c1">//returns all offers for the specified listing</span>

<span class="p">[{</span>
  <span class="na">id</span><span class="p">:</span> <span class="s2">"999-000-0-0"</span><span class="p">,</span>
  <span class="na">listingId</span><span class="p">:</span> <span class="s2">"9903-75"</span><span class="p">,</span>
  <span class="na">status</span><span class="p">:</span> <span class="s2">"created"</span><span class="p">,</span>
  <span class="na">createdAt</span><span class="p">:</span> <span class="mi">1539991086</span><span class="p">,</span>
  <span class="na">buyer</span><span class="p">:</span> <span class="s2">"0x627306090274fwfiou97h0c78a8BEf57"</span><span class="p">,</span>
  <span class="na">events</span><span class="p">:</span> <span class="p">[...],</span>
  <span class="na">refund</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="na">schemaId</span><span class="p">:</span> <span class="s2">"https://schema.originprotocol.com/offer_1.0.0.json"</span><span class="p">,</span>
  <span class="na">listingType</span><span class="p">:</span> <span class="s2">"unit"</span><span class="p">,</span>
  <span class="na">unitsPurchased</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">totalPrice</span><span class="p">:</span> <span class="p">{</span> <span class="na">currency</span><span class="p">:</span> <span class="s2">"ETH"</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="s2">"0.033"</span> <span class="p">},</span>
  <span class="na">ipfs</span><span class="p">:</span> <span class="p">{...}</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="s2">"82838-247-3-3"</span><span class="p">,</span>
  <span class="na">listingId</span><span class="p">:</span> <span class="s2">"9903-75"</span><span class="p">,</span>
  <span class="na">status</span><span class="p">:</span> <span class="s2">"created"</span><span class="p">,</span>
  <span class="na">buyer</span><span class="p">:</span> <span class="s2">"0x938828348ske02heo92394hwf"</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">}]</span>
</code></pre><h3 id='marketplace-getoffers-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>listingId</strong></td>
<td>string</td>
<td>required</td>
<td><code>listing.id</code></td>
</tr>
<tr>
<td><strong>options</strong></td>
<td>object</td>
<td>optional</td>
<td><code>const options = { for: &quot;0x627...&quot; }</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-makeoffer'>makeOffer</h2>
<p>The <code>makeOffer</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: makeOffer</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">listingId</span> <span class="o">=</span> <span class="s2">"9903-75"</span>
<span class="kr">const</span> <span class="nx">offer</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="s2">"82838-247-3-3"</span><span class="p">,</span>
  <span class="na">listingId</span><span class="p">:</span> <span class="s2">"9903-75"</span><span class="p">,</span>
  <span class="na">status</span><span class="p">:</span> <span class="s2">"created"</span><span class="p">,</span>
  <span class="na">buyer</span><span class="p">:</span> <span class="s2">"0x938828348ske02heo92394hwf"</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">}</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">makeOffer</span><span class="p">(</span><span class="nx">listingId</span><span class="p">,</span> <span class="nx">offer</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

</code></pre><h3 id='marketplace-makeoffer-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>listingId</strong></td>
<td>string</td>
<td>required</td>
<td><code>listing.id</code></td>
</tr>
<tr>
<td><strong>offer</strong></td>
<td>object</td>
<td>required</td>
<td>args see Protocol Schemas: Offer Schema</td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-acceptoffer'>acceptOffer</h2>
<p>The <code>acceptOffer</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: acceptOffer</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">offerId</span> <span class="o">=</span> <span class="s2">"543-0099"</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">acceptOffer</span><span class="p">(</span><span class="nx">offerId</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

</code></pre><h3 id='marketplace-acceptoffer-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offerId</strong></td>
<td>string</td>
<td>required</td>
<td><code>offer.id</code></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>object</td>
<td>optional</td>
<td>default to <code>{}</code> if not needed</td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-finalizeoffer'>finalizeOffer</h2>
<p>The <code>finalizeOffer</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: finalizeOffer</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">offerId</span> <span class="o">=</span> <span class="s2">"9903-75"</span>
<span class="kr">const</span> <span class="nx">buyerReview</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">rating</span><span class="p">:</span> <span class="mi">5</span>
  <span class="na">schemaId</span><span class="p">:</span> <span class="s2">"https://schema.originprotocol.com/review_1.0.0.json"</span>
  <span class="na">text</span><span class="p">:</span> <span class="s2">"Great response times. Professional."</span>
<span class="p">}</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">finalizeOffer</span><span class="p">(</span><span class="nx">offerId</span><span class="p">,</span> <span class="nx">buyerReview</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

</code></pre><h3 id='marketplace-finalizeoffer-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offerId</strong></td>
<td>string</td>
<td>required</td>
<td><code>offer.id</code></td>
</tr>
<tr>
<td><strong>buyerReview</strong></td>
<td>object</td>
<td>required</td>
<td>args <code>rating</code>, <code>schemaId</code>, <code>text</code></td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-withdrawoffer'>withdrawOffer</h2>
<p>The <code>withdrawOffer</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: withdrawOffer</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">offerId</span> <span class="o">=</span> <span class="s2">"543-0099"</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">withdrawOffer</span><span class="p">(</span><span class="nx">offerId</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

<span class="c1">// returns the offer with a OfferWithdrawn event</span>

<span class="p">{</span>
  <span class="nl">offerId</span><span class="p">:</span> <span class="s2">"543-0099"</span><span class="p">,</span>
  <span class="nx">events</span><span class="p">:</span> <span class="p">{</span> <span class="nl">OfferWithdrawn</span><span class="p">:</span> <span class="p">{...}</span> <span class="p">}</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre><h3 id='marketplace-withdrawoffer-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offerId</strong></td>
<td>string</td>
<td>required</td>
<td><code>offer.id</code></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>object</td>
<td>optional</td>
<td>default to <code>{}</code> if not needed</td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-adddata'>addData</h2>
<p>The <code>addData</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: addData</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">offerId</span> <span class="o">=</span> <span class="s2">"543-0099"</span>
<span class="kr">const</span> <span class="nx">listingId</span> <span class="o">=</span> <span class="s2">"9900-234"</span>
<span class="kr">const</span> <span class="nx">sellerReview</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">rating</span><span class="p">:</span> <span class="mi">4</span>
  <span class="na">schemaId</span><span class="p">:</span> <span class="s2">"https://schema.originprotocol.com/review_1.0.0.json"</span>
  <span class="na">text</span><span class="p">:</span> <span class="s2">""</span>
<span class="p">}</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">addData</span><span class="p">(</span><span class="nx">listingId</span><span class="p">,</span> <span class="nx">offerId</span><span class="p">,</span> <span class="nx">sellerReview</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

<span class="c1">// returns a timestamp and transaction receipt</span>

<span class="p">{</span>
  <span class="nl">timestamp</span><span class="p">:</span> <span class="mi">1540221215</span>
  <span class="nl">events</span><span class="p">:</span> <span class="p">{</span> <span class="nl">OfferWithdrawn</span><span class="p">:</span> <span class="p">{...}</span> <span class="p">}</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre><h3 id='marketplace-adddata-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>listingId</strong></td>
<td>string</td>
<td>optional</td>
<td>can be <code>null</code></td>
</tr>
<tr>
<td><strong>offerId</strong></td>
<td>string</td>
<td>optional</td>
<td>can be <code>null</code></td>
</tr>
<tr>
<td><strong>sellerReview</strong></td>
<td>object</td>
<td>optional</td>
<td>default to <code>{}</code> if not needed</td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-initiatedispute'>initiateDispute</h2>
<p>The <code>initiateDispute</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: initiateDispute</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">offerId</span> <span class="o">=</span> <span class="s2">"543-0099"</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">initiateDispute</span><span class="p">(</span><span class="nx">offerId</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

<span class="c1">// returns a timestamp and transaction receipt</span>

<span class="p">{</span>
  <span class="nl">timestamp</span><span class="p">:</span> <span class="mi">1540221215</span>
  <span class="nl">events</span><span class="p">:</span> <span class="p">{</span> <span class="nl">OfferDisputed</span><span class="p">:</span> <span class="p">{...}</span> <span class="p">}</span>
  <span class="p">...</span>
<span class="p">}</span>

</code></pre><h3 id='marketplace-initiatedispute-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offerId</strong></td>
<td>string</td>
<td>required</td>
<td></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>object</td>
<td>optional</td>
<td>default to <code>{}</code> if not needed</td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
<h2 id='marketplace-resolvedispute'>resolveDispute</h2>
<p>The <code>resolveDispute</code> method takes a callback with two arguments:</p>

<p><code>confirmationCount</code> - the number of block confirmations</p>

<p><code>transactionReceipt</code> - an object with a timestamp and information about the transaction and the corresponding block</p>

<blockquote>
<p>Example: resolveDispute</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">offerId</span> <span class="o">=</span> <span class="s2">"543-0099"</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">const</span> <span class="nx">ruling</span> <span class="o">=</span> <span class="mi">1</span>
<span class="kr">const</span> <span class="nx">refund</span> <span class="o">=</span> <span class="mi">33000000000000000</span>
<span class="kr">const</span> <span class="nx">callback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">confirmationCount</span><span class="p">,</span> <span class="nx">transactionReceipt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//manage response</span>
<span class="p">}</span>

<span class="o">&gt;</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">marketplace</span><span class="p">.</span><span class="nx">resolveDispute</span><span class="p">(</span><span class="nx">offerId</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">ruling</span><span class="p">,</span> <span class="nx">refund</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

<span class="c1">// returns a timestamp and transaction receipt</span>

<span class="p">{</span>
  <span class="nl">timestamp</span><span class="p">:</span> <span class="mi">1540221215</span>
  <span class="nl">events</span><span class="p">:</span> <span class="p">{</span> <span class="nl">OfferRuling</span><span class="p">:</span> <span class="p">{...}</span> <span class="p">}</span>
  <span class="p">...</span>
<span class="p">}</span>

</code></pre><h3 id='marketplace-resolvedispute-arguments'>Arguments:</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offerId</strong></td>
<td>string</td>
<td>required</td>
<td></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>object</td>
<td>required</td>
<td>default to <code>{}</code> if not needed</td>
</tr>
<tr>
<td><strong>ruling</strong></td>
<td>number</td>
<td>required</td>
<td><code>0</code> or <code>1</code></td>
</tr>
<tr>
<td><strong>refund</strong></td>
<td>object</td>
<td>required</td>
<td>price in <code>wei</code></td>
</tr>
<tr>
<td><strong>callback</strong></td>
<td>function</td>
<td>optional</td>
<td>provides args <code>confirmationCount</code> and <code>transactionReceipt</code></td>
</tr>
</tbody></table>
